; Custom PHP-FPM Pool Configuration
; This file overrides the default www.conf settings

[www]

; Process manager configuration
; Choose between: static, dynamic, ondemand
pm = dynamic

; Maximum number of child processes
pm.max_children = 50

; Number of child processes created on startup
pm.start_servers = 5

; Minimum number of idle processes
pm.min_spare_servers = 5

; Maximum number of idle processes
pm.max_spare_servers = 10

; Number of requests each child should process before respawning
; Useful to mitigate memory leaks
pm.max_requests = 500

; Logging
catch_workers_output = yes
decorate_workers_output = no

; PHP admin values
php_admin_flag[log_errors] = on
php_admin_value[error_log] = /proc/self/fd/2
php_admin_value[memory_limit] = 512M

; Timeout for serving a single request
request_terminate_timeout = 120s

; Process management events
; Available events: ondemand (start process on-demand)
; pm.process_idle_timeout = 10s

; Slow log - Log requests that take more than specified time
slowlog = /proc/self/fd/2
request_slowlog_timeout = 10s

; Status page (useful for monitoring)
; Uncomment to enable
; pm.status_path = /status
; ping.path = /ping
; ping.response = pong

; Set environment variables
; env[HOSTNAME] = $HOSTNAME
; env[PATH] = /usr/local/bin:/usr/bin:/bin
; env[TMP] = /tmp
; env[TMPDIR] = /tmp
; env[TEMP] = /tmp